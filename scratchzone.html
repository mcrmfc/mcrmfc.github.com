<html>
    <head>
        <title>Matt's Scratchzone</title>
        <script src="/javascripts/jquery-1.5.1.min.js" type="text/javascript"></script>
    </head>
    <body>
        <p>currently playing...</p>
        <div id="mylist">
            <ul></ul>
        </div>
        <script>
            var LAST_URL = 'http://ws.audioscrobbler.com/2.0/?method=artist.gettopalbums&api_key=b25b959554ed76058ac220b7b2e0a026&format=json&callback=?';
            var artists = ['miles davis','john coltrane','marvin gaye'];

            $.each(artists, function(i,v) {
                $.getJSON(LAST_URL + "&artist=" + v,
                {
                    format: "json"
                },
                function(data) {
                    $.each(data.topalbums.album, function(i,item){
                        $("<img/>").attr("src", item.image[1]['#text']).load(function() {
                            console.log(this.height);
                            if(this.height == '64' && this.width == '64' && $("#mylist ul img").length < 100) {
                                $("#mylist > ul").append(this);
                                console.log($("#mylist ul img").length);
                            }
                        });
                    });
                }); 
            });
        </script>
        <style type="text/css">
            #mylist {
                height:700px; width:700px; 
                position: fixed; 
                top: 50%;
                left: 50%;
                margin-top: -350px;
                margin-left: -350px;
            }
        </style>
    </body>
</html>
