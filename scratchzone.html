<html>
    <head>
        <title>Matt's Scratchzone</title>
        <script src="/javascripts/jquery-1.5.1.min.js" type="text/javascript"></script>
    </head>
    <body>
        <div id="mylist">
        </div>
        <script>
            var LAST_URL = 'http://ws.audioscrobbler.com/2.0/?method=artist.gettopalbums&api_key=b25b959554ed76058ac220b7b2e0a026&format=json&callback=?';
            var artists = ['miles davis','john coltrane','marvin gaye'];
            $.each(artists, function(i,v) {
                $.getJSON(LAST_URL + "&artist=" + v,
                {
                    format: "json"
                },
                function(data) {
                    $.each(data.topalbums.album, function(i,item){
                        $("<img />").attr("src", item.image[1]['#text']).load(function() {
                            if(this.height == '64' && this.width == '64' && $("#mylist div").length < 200) {
                                $(this).appendTo('#mylist').wrap('<div class="albumimg">'+ '</div>');
                                $(this).parent().append('<div style="opacity: 0"><p>' + (item.artist.name).toLowerCase() + '</p><p>' + (item.name).toLowerCase() + '</p></div>');
                                $(this).parent().hover(
                                function() {
                                    $(this).children("img").fadeTo(500,0.4);
                                    $(this).children("div").fadeTo(500,1);
                                }, 
                                function() {
                                    $(this).children("img").fadeTo(500,1);
                                    $(this).children("div").fadeTo(500,0);
                                });
                            }
                        });
                    });
                }); 
            });
        </script>
        <style type="text/css">
            #mylist {
                width:640px; 
                margin:0 auto; /*css standard for centering - note may not work in IE*/
            }
            div.albumimg {
                display: inline-block;
                overflow: hidden;
                position: relative; /*has to be relative position for the child absolute positioning to work*/
            }
            div.albumimg > div {
                position: absolute;
                overflow: hidden;
                height:64px; width:64px; 
                top: 0px;
                left: 0px;
            }
            p {
                font-family:"Courier New", monospace;
                font-style: normal;
                font-size: 9px;
                margin: 0;
            }

        </style>
    </body>
</html>
